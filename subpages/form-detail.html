<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¬¸ì„œ ìƒì„¸ë³´ê¸°</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1 { font-size: 28px; }
    .description, .category { font-size: 18px; margin: 10px 0; }
    .section-title { font-weight: bold; font-size: 18px; margin-top: 30px; }
    .icons img { width: 85px; margin: 0 10px; vertical-align: middle; }
    .back { margin-top: 40px; display: block; font-size: 16px; color: blue; text-decoration: none; }
    iframe { border: 1px solid #ccc; margin-top: 10px; }
  </style>
</head>
<body>
  <h1 id="title">ì„œì‹ëª… :</h1>
  <div class="description" id="description">ê°„ë‹¨ ì„¤ëª… :</div>
  <div class="category" id="category">ë¶„ë¥˜(ì¹´í…Œê³ ë¦¬) :</div>

  <div class="section-title">ë¯¸ë¦¬ë³´ê¸°</div>
  <div id="previewArea">PDF ë¯¸ë¦¬ë³´ê¸°ë¥¼ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤...</div>

  <div class="section-title">ë‹¤ìš´ë¡œë“œ ë§í¬</div>
  <div class="icons" id="icons"></div>

  <a href="#" class="back" id="backLink">â† ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>

  <script>
    function getQueryParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    const id = getQueryParam("id");

    fetch("../data/forms.json")
      .then(response => response.json())
      .then(data => {
        const form = data.find(item => item.id === id);
        const title = document.getElementById("title");
        const description = document.getElementById("description");
        const category = document.getElementById("category");
        const icons = document.getElementById("icons");
        const backLink = document.getElementById("backLink");
        const previewArea = document.getElementById("previewArea");

        if (!form) {
          title.innerText = "í•´ë‹¹ ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
          description.innerText = "";
          category.innerText = "";
          icons.innerHTML = "";
          previewArea.innerHTML = "";
          return;
        }

        title.innerText = form.code + " - " + form.title;
        description.innerText = form.description;
        category.innerText = form.category;

        // ğŸ“„ PDF ë¯¸ë¦¬ë³´ê¸° ì¸ë„¤ì¼ í‘œì‹œ
        if (form.pdf) {
          previewArea.innerHTML = `
            <iframe src="../files/${form.pdf}" width="100%" height="300px"></iframe>
          `;
        } else {
          previewArea.innerText = "PDF íŒŒì¼ì´ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.";
        }

        // ë‹¤ìš´ë¡œë“œ ì•„ì´ì½˜ë“¤
        if (form.pdf) icons.innerHTML += `<a href="../files/${form.pdf}" target="_blank"><img src="../img/pdf.png" alt="PDF"></a>`;
        if (form.doc) icons.innerHTML += `<a href="../files/${form.doc}" target="_blank"><img src="../img/doc.png" alt="DOC"></a>`;
        if (form.hwp) icons.innerHTML += `<a href="../files/${form.hwp}" target="_blank"><img src="../img/hwp.png" alt="HWP"></a>`;
        if (form.xls) icons.innerHTML += `<a href="../files/${form.xls}" target="_blank"><img src="../img/xls.png" alt="XLS"></a>`;

        // ë’¤ë¡œê°€ê¸° ë§í¬ ìë™ ì§€ì •
        let categoryPage = '';
        if (form.category.includes('ê³µê³µ')) categoryPage = 'sub-public.html';
        else if (form.category.includes('ê°œì¸')) categoryPage = 'sub-personal.html';
        else if (form.category.includes('ì™¸êµ­')) categoryPage = 'sub-global.html';

        backLink.href = `../subpages/${categoryPage}`;
      });
  </script>
</body>
</html>
